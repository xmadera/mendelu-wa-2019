webpackJsonp([1],{"+48l":function(e,t){},"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),o=n("e6fC"),r=n.n(o),s=(n("Jmt5"),n("9M+g"),{name:"NavBar",computed:{isLoggedIn:function(){const e=localStorage.getItem("token");return null!==e&&void 0!==e}},methods:{login:function(){this.$router.push({name:"login"})},logout:function(){localStorage.removeItem("token"),window.location.reload()}}}),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{href:"/"}},[e._v("Chat")]),e._v(" "),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e._v(" "),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"#"}},[e._v("Link")]),e._v(" "),n("b-nav-item",{attrs:{href:"#",disabled:""}},[e._v("Disabled")])],1),e._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-form",[n("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Search"}}),e._v(" "),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"submit"}},[e._v("Search")])],1),e._v(" "),n("b-nav-item-dropdown",{attrs:{text:"Lang",right:""}},[n("b-dropdown-item",{attrs:{href:"#"}},[e._v("EN")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[e._v("ES")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[e._v("RU")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[e._v("FA")])],1),e._v(" "),e.isLoggedIn?n("div",[n("b-nav-item-dropdown",{attrs:{right:""}},[n("template",{slot:"button-content"},[e._v("Uživatel")]),e._v(" "),n("b-dropdown-item",{on:{click:e.logout}},[e._v("Odhlásit")])],2)],1):n("div",[n("b-button",{on:{click:e.login}},[e._v("Přihlásit")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")(s,i,!1,function(e){n("gMVi")},"data-v-29ac2b4a",null).exports;a.default.use(r.a);var m={name:"App",components:{NavBar:l}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("div",{staticClass:"container"},[t("router-view")],1)],1)},staticRenderFns:[]},d=n("VU/8")(m,u,!1,null,null,null).exports,v=n("/ocq"),p={name:"NewRoom",data:()=>({name:""}),methods:{createRoom(){this.$http.post("/api/auth/rooms",{title:this.name}).then(()=>{this.name="",alert("Mistnost vytvorena")}).catch(()=>{alert("Chyba")})}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Vytvorit mistnost")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.createRoom(t)}}},[e._v("\n        Nazev mistnosti:\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),n("br"),e._v(" "),n("button",[e._v("Vytvorit")])])])},staticRenderFns:[]};var h={components:{NewRoom:n("VU/8")(p,c,!1,function(e){n("uAM7")},"data-v-50491974",null).exports},data:()=>({rooms:[]}),mounted(){this.loadRooms()},methods:{loadRooms(){this.$http.get("api/auth/rooms").then(e=>{this.rooms=e.data})}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Místnosti")]),e._v(" "),n("table",e._l(e.rooms,function(t){return n("tr",[n("td",[n("router-link",{attrs:{to:{name:"room",params:{id:t.id_rooms}}}},[e._v("\n          "+e._s(t.title)+"\n        ")])],1)])}),0),e._v(" "),n("hr"),e._v(" "),n("new-room")],1)},staticRenderFns:[]},_=n("VU/8")(h,g,!1,null,null,null).exports,f={data:()=>({login:"",password:""}),methods:{doLogin(){this.$http.post("api/login",{login:this.login,password:this.password}).then(e=>{const t=e.data.token;console.log(t),localStorage.setItem("token",t),this.$http.defaults.headers.common.Authorization=e.data.token,void 0!==this.$route.params.nextUrl?this.$router.push({path:this.$route.params.nextUrl}):this.$router.push({name:"rooms"}),window.location.reload()}).catch(e=>{console.log(e),alert("Check your credentials.")})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Login")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[e._v("\n    Username:\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"text",required:""},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),e._v(" "),n("br"),e._v("\n    Heslo:\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("br"),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[n("font-awesome-icon",{attrs:{icon:"sign-in-alt"}}),e._v("\n      Log in\n    ")],1)],1),e._v(" "),n("router-link",{attrs:{to:{name:"register"}}},[e._v("\n    Registrace\n  ")])],1)},staticRenderFns:[]},w=n("VU/8")(f,b,!1,null,null,null).exports,x={data:()=>({name:"",surname:"",email:"",password1:"",password2:"",gender:"male",login:""}),methods:{register(){this.password1==this.password2?this.$http.post("api/register",{name:this.name,surname:this.surname,login:this.login,password:this.password1,gender:this.gender,email:this.email}).then(()=>{this.$router.push({name:"login"})},()=>{alert("Chyba registrace")}):alert("Hesla se neshoduji.")}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Registrace")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("label",[e._v("Login")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"text",required:""},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Heslo")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],attrs:{type:"password",required:""},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Heslo kontrola")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],attrs:{type:"password",required:""},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Jmeno")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Prijmeni")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],attrs:{type:"text",required:""},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Email")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("br"),e._v(" "),n("label",[e._v("Pohlavi")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.gender=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"male"}},[e._v("Muz")]),e._v(" "),n("option",{attrs:{value:"female"}},[e._v("Zena")])]),n("br"),e._v(" "),n("button",{attrs:{type:"submit"}},[e._v("Zaregistrovat")])]),e._v(" "),n("router-link",{attrs:{to:{name:"login"}}},[e._v("\n    Zpet\n  ")])],1)},staticRenderFns:[]},$=n("VU/8")(x,y,!1,null,null,null).exports,R={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"auth-section"}},[t("router-view")],1)},staticRenderFns:[]};var k=n("VU/8")({name:"AuthSection"},R,!1,function(e){n("d+dE")},"data-v-66425fe2",null).exports,N={name:"Room",data:()=>({roomId:null,messages:[],reloader:null}),mounted(){const e=this.$route.params.id;this.roomId=e,this.reloader=setInterval(()=>{this.loadMessages()},1e3)},beforeDestroy(){clearInterval(this.reloader)},methods:{loadMessages(){this.$http.get("api/auth/messages/"+this.roomId).then(e=>{this.messages=e.data})}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Místnost "+e._s(e.roomId))]),e._v(" "),e._l(e.messages,function(t){return n("div",[e._v("\n        "+e._s(t.message)+"\n    ")])})],2)},staticRenderFns:[]};var U=n("VU/8")(N,E,!1,function(e){n("+48l")},"data-v-c226dd90",null).exports,M={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Vitejte v chatu")])])}]},P=n("VU/8")({},M,!1,null,null,null).exports;a.default.use(v.a);var V=new v.a({routes:[{path:"/",name:"homepsge",component:P},{path:"/login",name:"login",component:w},{path:"/registrace",name:"register",component:$},{path:"/auth",name:"auth",component:k,beforeEnter:function(e,t,n){const a=localStorage.getItem("token");null===a||void 0===a?n({name:"login",params:{nextUrl:e.fullPath}}):n()},children:[{path:"/rooms",name:"rooms",component:_},{path:"/rooms/:id",name:"room",component:U}]}]});var I=n("mtWM"),F=n.n(I),q=n("C/JF"),A=n("fhbW"),C=n("1e6/");const L=F.a.create();L.defaults.baseURL="https://akela.mendelu.cz/~xpisarov/wa10/backend/public/",a.default.prototype.$http=L;const S=localStorage.getItem("token");null!==S&&void 0!==S&&(a.default.prototype.$http.defaults.headers.common.Authorization=S),q.c.add(A.a),q.c.add(A.b),a.default.component("font-awesome-icon",C.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:V,components:{App:d},template:"<App/>"})},"d+dE":function(e,t){},gMVi:function(e,t){},uAM7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3213dcd034a0e7984bdc.js.map